machine:
  services:
    - docker

dependencies:
  override:
    - docker info
    - docker pull analogj/capsulecd:chef
    - docker pull analogj/capsulecd:javascript
    - docker pull analogj/capsulecd:node
    - docker pull analogj/capsulecd:python

test:
  override:
    - docker run analogj/capsulecd:chef sh -c "bundle install --with test && rake 'spec:chef'"
    - docker run analogj/capsulecd:javascript sh -c "bundle install --with test && rake 'spec:javascript'"
    - docker run analogj/capsulecd:node sh -c "bundle install --with test && rake 'spec:node'"
    - docker run analogj/capsulecd:python  sh -c "bundle install --with test && rake 'spec:python'"

